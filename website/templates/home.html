{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
  <div class="dashboard">
    <h1>Hi {{ user_name }}!</h1>

    <button class="button green">View Calendar</button>

<div class="card">
  <h3>This Week</h3>
  {% for task in this_week %}
    <div class="task {{ task.color }}">{{ task.icon }} {{ task.name }}</div>
  {% endfor %}

  <h3 style="margin-top: 20px;">Next Week</h3>
  {% for task in next_week %}
    <div class="task {{ task.color }}">{{ task.icon }} {{ task.name }}</div>
  {% endfor %}
</div>

    <button class="button pink">View Tasks</button>
    <button class="button purple">View Grades</button>

    <div class="time-box" id="local-time">
    Loading time...
    </div>
  </div>

  <script>
function updateTime() {
  const options = {
    timeZone: "Australia/Sydney",
    hour: '2-digit',
    minute: '2-digit',
    hour12: true,
    weekday: 'long'
  };
  const now = new Date();
  const timeString = now.toLocaleTimeString('en-AU', options);
  const parts = timeString.split(' ');

  const hourMin = parts[0];
  const meridian = parts[1];
  const day = parts[2].toUpperCase();

  document.getElementById("local-time").innerText = `${hourMin} ${meridian} ${day}`;
}
// Update on load and every 30 seconds
updateTime();
setInterval(updateTime, 30000);
</script>

{% endblock %}